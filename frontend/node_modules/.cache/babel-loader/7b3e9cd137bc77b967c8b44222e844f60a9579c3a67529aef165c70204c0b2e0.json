{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useRef, useState, useCallback } from 'react';\n\n/**\r\n * useFullscreenMonitor\r\n * \r\n * Custom hook to monitor fullscreen status and detect violations.\r\n * Automatically enters fullscreen when enabled and tracks violations\r\n * like exiting fullscreen, tab switching, and window blur.\r\n * \r\n * @param {boolean} isEnabled - Whether monitoring is active\r\n * @param {function} onViolation - Callback when violation is detected\r\n * @param {object} student - Student object with rollNumber\r\n * @returns {object} - { enterFullscreen, exitFullscreen, isFullscreen, violationCount, showWarning, warningMessage }\r\n */\nexport function useFullscreenMonitor(isEnabled, onViolation, student) {\n  _s();\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [violationCount, setViolationCount] = useState(0);\n  const [showWarning, setShowWarning] = useState(false);\n  const [warningMessage, setWarningMessage] = useState('');\n  const lastViolationTime = useRef(0);\n  const isMonitoring = useRef(false);\n\n  // Enter fullscreen\n  const enterFullscreen = useCallback(async () => {\n    try {\n      const elem = document.documentElement;\n      if (elem.requestFullscreen) {\n        await elem.requestFullscreen();\n      } else if (elem.webkitRequestFullscreen) {\n        await elem.webkitRequestFullscreen();\n      } else if (elem.msRequestFullscreen) {\n        await elem.msRequestFullscreen();\n      }\n    } catch (err) {\n      console.error('Failed to enter fullscreen:', err);\n    }\n  }, []);\n\n  // Exit fullscreen\n  const exitFullscreen = useCallback(async () => {\n    try {\n      if (document.exitFullscreen) {\n        await document.exitFullscreen();\n      } else if (document.webkitExitFullscreen) {\n        await document.webkitExitFullscreen();\n      } else if (document.msExitFullscreen) {\n        await document.msExitFullscreen();\n      }\n    } catch (err) {\n      console.error('Failed to exit fullscreen:', err);\n    }\n  }, []);\n\n  // Log violation to backend\n  const logViolation = useCallback(async violationType => {\n    if (!(student !== null && student !== void 0 && student.rollNumber) || !onViolation) return;\n\n    // Debounce violations (max 1 per 2 seconds)\n    const now = Date.now();\n    if (now - lastViolationTime.current < 2000) return;\n    lastViolationTime.current = now;\n    try {\n      await onViolation(violationType);\n      setViolationCount(prev => prev + 1);\n    } catch (err) {\n      console.error('Failed to log violation:', err);\n    }\n  }, [student, onViolation]);\n\n  // Show warning message\n  const displayWarning = useCallback(message => {\n    setWarningMessage(message);\n    setShowWarning(true);\n    setTimeout(() => setShowWarning(false), 5000); // Hide after 5 seconds\n  }, []);\n\n  // Handle fullscreen change\n  useEffect(() => {\n    if (!isEnabled) return;\n    const handleFullscreenChange = () => {\n      const isCurrentlyFullscreen = !!(document.fullscreenElement || document.webkitFullscreenElement || document.msFullscreenElement);\n      setIsFullscreen(isCurrentlyFullscreen);\n\n      // If monitoring is active and user exited fullscreen\n      if (isMonitoring.current && !isCurrentlyFullscreen) {\n        logViolation('exit_fullscreen');\n        displayWarning('⚠️ Warning: You have exited fullscreen.');\n        // Re-enter fullscreen after a short delay\n        setTimeout(() => enterFullscreen(), 1000);\n      }\n    };\n    document.addEventListener('fullscreenchange', handleFullscreenChange);\n    document.addEventListener('webkitfullscreenchange', handleFullscreenChange);\n    document.addEventListener('msfullscreenchange', handleFullscreenChange);\n    return () => {\n      document.removeEventListener('fullscreenchange', handleFullscreenChange);\n      document.removeEventListener('webkitfullscreenchange', handleFullscreenChange);\n      document.removeEventListener('msfullscreenchange', handleFullscreenChange);\n    };\n  }, [isEnabled, logViolation, displayWarning, enterFullscreen]);\n\n  // Handle tab switching and window blur\n  useEffect(() => {\n    if (!isEnabled || !isMonitoring.current) return;\n    const handleVisibilityChange = () => {\n      if (document.hidden) {\n        logViolation('tab_switch');\n        displayWarning('⚠️ Warning: You switched tabs or minimized the window.');\n      }\n    };\n    const handleWindowBlur = () => {\n      logViolation('window_blur');\n      displayWarning('⚠️ Warning: You switched to another application.');\n    };\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n    window.addEventListener('blur', handleWindowBlur);\n    return () => {\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n      window.removeEventListener('blur', handleWindowBlur);\n    };\n  }, [isEnabled, logViolation, displayWarning]);\n\n  // Start monitoring\n  const startMonitoring = useCallback(() => {\n    isMonitoring.current = true;\n    enterFullscreen();\n  }, [enterFullscreen]);\n\n  // Stop monitoring\n  const stopMonitoring = useCallback(() => {\n    isMonitoring.current = false;\n    exitFullscreen();\n  }, [exitFullscreen]);\n  return {\n    enterFullscreen,\n    exitFullscreen,\n    isFullscreen,\n    violationCount,\n    showWarning,\n    warningMessage,\n    startMonitoring,\n    stopMonitoring\n  };\n}\n_s(useFullscreenMonitor, \"vkpIxvqT0h+AsmVX00f/FPlmx4k=\");","map":{"version":3,"names":["useEffect","useRef","useState","useCallback","useFullscreenMonitor","isEnabled","onViolation","student","_s","isFullscreen","setIsFullscreen","violationCount","setViolationCount","showWarning","setShowWarning","warningMessage","setWarningMessage","lastViolationTime","isMonitoring","enterFullscreen","elem","document","documentElement","requestFullscreen","webkitRequestFullscreen","msRequestFullscreen","err","console","error","exitFullscreen","webkitExitFullscreen","msExitFullscreen","logViolation","violationType","rollNumber","now","Date","current","prev","displayWarning","message","setTimeout","handleFullscreenChange","isCurrentlyFullscreen","fullscreenElement","webkitFullscreenElement","msFullscreenElement","addEventListener","removeEventListener","handleVisibilityChange","hidden","handleWindowBlur","window","startMonitoring","stopMonitoring"],"sources":["C:/Users/sadly/Documents/New folder/contest-platform/frontend/src/hooks/useFullscreenMonitor.js"],"sourcesContent":["import { useEffect, useRef, useState, useCallback } from 'react';\r\n\r\n/**\r\n * useFullscreenMonitor\r\n * \r\n * Custom hook to monitor fullscreen status and detect violations.\r\n * Automatically enters fullscreen when enabled and tracks violations\r\n * like exiting fullscreen, tab switching, and window blur.\r\n * \r\n * @param {boolean} isEnabled - Whether monitoring is active\r\n * @param {function} onViolation - Callback when violation is detected\r\n * @param {object} student - Student object with rollNumber\r\n * @returns {object} - { enterFullscreen, exitFullscreen, isFullscreen, violationCount, showWarning, warningMessage }\r\n */\r\nexport function useFullscreenMonitor(isEnabled, onViolation, student) {\r\n    const [isFullscreen, setIsFullscreen] = useState(false);\r\n    const [violationCount, setViolationCount] = useState(0);\r\n    const [showWarning, setShowWarning] = useState(false);\r\n    const [warningMessage, setWarningMessage] = useState('');\r\n    const lastViolationTime = useRef(0);\r\n    const isMonitoring = useRef(false);\r\n\r\n    // Enter fullscreen\r\n    const enterFullscreen = useCallback(async () => {\r\n        try {\r\n            const elem = document.documentElement;\r\n            if (elem.requestFullscreen) {\r\n                await elem.requestFullscreen();\r\n            } else if (elem.webkitRequestFullscreen) {\r\n                await elem.webkitRequestFullscreen();\r\n            } else if (elem.msRequestFullscreen) {\r\n                await elem.msRequestFullscreen();\r\n            }\r\n        } catch (err) {\r\n            console.error('Failed to enter fullscreen:', err);\r\n        }\r\n    }, []);\r\n\r\n    // Exit fullscreen\r\n    const exitFullscreen = useCallback(async () => {\r\n        try {\r\n            if (document.exitFullscreen) {\r\n                await document.exitFullscreen();\r\n            } else if (document.webkitExitFullscreen) {\r\n                await document.webkitExitFullscreen();\r\n            } else if (document.msExitFullscreen) {\r\n                await document.msExitFullscreen();\r\n            }\r\n        } catch (err) {\r\n            console.error('Failed to exit fullscreen:', err);\r\n        }\r\n    }, []);\r\n\r\n    // Log violation to backend\r\n    const logViolation = useCallback(async (violationType) => {\r\n        if (!student?.rollNumber || !onViolation) return;\r\n\r\n        // Debounce violations (max 1 per 2 seconds)\r\n        const now = Date.now();\r\n        if (now - lastViolationTime.current < 2000) return;\r\n        lastViolationTime.current = now;\r\n\r\n        try {\r\n            await onViolation(violationType);\r\n            setViolationCount(prev => prev + 1);\r\n        } catch (err) {\r\n            console.error('Failed to log violation:', err);\r\n        }\r\n    }, [student, onViolation]);\r\n\r\n    // Show warning message\r\n    const displayWarning = useCallback((message) => {\r\n        setWarningMessage(message);\r\n        setShowWarning(true);\r\n        setTimeout(() => setShowWarning(false), 5000); // Hide after 5 seconds\r\n    }, []);\r\n\r\n    // Handle fullscreen change\r\n    useEffect(() => {\r\n        if (!isEnabled) return;\r\n\r\n        const handleFullscreenChange = () => {\r\n            const isCurrentlyFullscreen = !!(\r\n                document.fullscreenElement ||\r\n                document.webkitFullscreenElement ||\r\n                document.msFullscreenElement\r\n            );\r\n\r\n            setIsFullscreen(isCurrentlyFullscreen);\r\n\r\n            // If monitoring is active and user exited fullscreen\r\n            if (isMonitoring.current && !isCurrentlyFullscreen) {\r\n                logViolation('exit_fullscreen');\r\n                displayWarning('⚠️ Warning: You have exited fullscreen.');\r\n                // Re-enter fullscreen after a short delay\r\n                setTimeout(() => enterFullscreen(), 1000);\r\n            }\r\n        };\r\n\r\n        document.addEventListener('fullscreenchange', handleFullscreenChange);\r\n        document.addEventListener('webkitfullscreenchange', handleFullscreenChange);\r\n        document.addEventListener('msfullscreenchange', handleFullscreenChange);\r\n\r\n        return () => {\r\n            document.removeEventListener('fullscreenchange', handleFullscreenChange);\r\n            document.removeEventListener('webkitfullscreenchange', handleFullscreenChange);\r\n            document.removeEventListener('msfullscreenchange', handleFullscreenChange);\r\n        };\r\n    }, [isEnabled, logViolation, displayWarning, enterFullscreen]);\r\n\r\n    // Handle tab switching and window blur\r\n    useEffect(() => {\r\n        if (!isEnabled || !isMonitoring.current) return;\r\n\r\n        const handleVisibilityChange = () => {\r\n            if (document.hidden) {\r\n                logViolation('tab_switch');\r\n                displayWarning('⚠️ Warning: You switched tabs or minimized the window.');\r\n            }\r\n        };\r\n\r\n        const handleWindowBlur = () => {\r\n            logViolation('window_blur');\r\n            displayWarning('⚠️ Warning: You switched to another application.');\r\n        };\r\n\r\n        document.addEventListener('visibilitychange', handleVisibilityChange);\r\n        window.addEventListener('blur', handleWindowBlur);\r\n\r\n        return () => {\r\n            document.removeEventListener('visibilitychange', handleVisibilityChange);\r\n            window.removeEventListener('blur', handleWindowBlur);\r\n        };\r\n    }, [isEnabled, logViolation, displayWarning]);\r\n\r\n    // Start monitoring\r\n    const startMonitoring = useCallback(() => {\r\n        isMonitoring.current = true;\r\n        enterFullscreen();\r\n    }, [enterFullscreen]);\r\n\r\n    // Stop monitoring\r\n    const stopMonitoring = useCallback(() => {\r\n        isMonitoring.current = false;\r\n        exitFullscreen();\r\n    }, [exitFullscreen]);\r\n\r\n    return {\r\n        enterFullscreen,\r\n        exitFullscreen,\r\n        isFullscreen,\r\n        violationCount,\r\n        showWarning,\r\n        warningMessage,\r\n        startMonitoring,\r\n        stopMonitoring\r\n    };\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}