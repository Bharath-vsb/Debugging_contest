{"ast":null,"code":"/**\n * api.js\n * ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n * Centralised Axios instance.\n * All frontend code imports from here so the base URL is configured once.\n * \n * NETWORK DEPLOYMENT:\n *   - Automatically detects API URL from environment\n *   - For local network: set REACT_APP_API_URL to http://YOUR_LOCAL_IP:5000/api\n *   - Increased timeout for network conditions\n */\n\nimport axios from 'axios';\nconst BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\nconsole.log('üåê API Base URL:', BASE_URL);\nconst api = axios.create({\n  baseURL: BASE_URL,\n  timeout: 60000,\n  // 60s - generous for network conditions and Docker execution\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// ‚îÄ‚îÄ Interceptor: attach admin JWT to every request if present ‚îÄ‚îÄ\napi.interceptors.request.use(config => {\n  const token = sessionStorage.getItem('adminToken');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// ‚îÄ‚îÄ Interceptor: handle network errors gracefully ‚îÄ‚îÄ\napi.interceptors.response.use(response => response, error => {\n  if (error.code === 'ECONNABORTED') {\n    console.error('‚ö†Ô∏è Request timeout - server may be overloaded');\n  } else if (error.message === 'Network Error') {\n    console.error('‚ö†Ô∏è Network error - check if backend is running');\n  }\n  return Promise.reject(error);\n});\nexport default api;","map":{"version":3,"names":["axios","BASE_URL","process","env","REACT_APP_API_URL","console","log","api","create","baseURL","timeout","headers","interceptors","request","use","config","token","sessionStorage","getItem","Authorization","response","error","code","message","Promise","reject"],"sources":["C:/Users/sadly/Documents/Debugging contest/contest-platform/frontend/src/utils/api.js"],"sourcesContent":["/**\n * api.js\n * ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n * Centralised Axios instance.\n * All frontend code imports from here so the base URL is configured once.\n * \n * NETWORK DEPLOYMENT:\n *   - Automatically detects API URL from environment\n *   - For local network: set REACT_APP_API_URL to http://YOUR_LOCAL_IP:5000/api\n *   - Increased timeout for network conditions\n */\n\nimport axios from 'axios';\n\nconst BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\nconsole.log('üåê API Base URL:', BASE_URL);\n\nconst api = axios.create({\n  baseURL: BASE_URL,\n  timeout: 60000,   // 60s - generous for network conditions and Docker execution\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// ‚îÄ‚îÄ Interceptor: attach admin JWT to every request if present ‚îÄ‚îÄ\napi.interceptors.request.use((config) => {\n  const token = sessionStorage.getItem('adminToken');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// ‚îÄ‚îÄ Interceptor: handle network errors gracefully ‚îÄ‚îÄ\napi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.code === 'ECONNABORTED') {\n      console.error('‚ö†Ô∏è Request timeout - server may be overloaded');\n    } else if (error.message === 'Network Error') {\n      console.error('‚ö†Ô∏è Network error - check if backend is running');\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport default api;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,2BAA2B;AAE7EC,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEL,QAAQ,CAAC;AAEzC,MAAMM,GAAG,GAAGP,KAAK,CAACQ,MAAM,CAAC;EACvBC,OAAO,EAAER,QAAQ;EACjBS,OAAO,EAAE,KAAK;EAAI;EAClBC,OAAO,EAAE;IACP,cAAc,EAAE;EAClB;AACF,CAAC,CAAC;;AAEF;AACAJ,GAAG,CAACK,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAAM,IAAK;EACvC,MAAMC,KAAK,GAAGC,cAAc,CAACC,OAAO,CAAC,YAAY,CAAC;EAClD,IAAIF,KAAK,EAAE;IACTD,MAAM,CAACJ,OAAO,CAACQ,aAAa,GAAG,UAAUH,KAAK,EAAE;EAClD;EACA,OAAOD,MAAM;AACf,CAAC,CAAC;;AAEF;AACAR,GAAG,CAACK,YAAY,CAACQ,QAAQ,CAACN,GAAG,CAC1BM,QAAQ,IAAKA,QAAQ,EACrBC,KAAK,IAAK;EACT,IAAIA,KAAK,CAACC,IAAI,KAAK,cAAc,EAAE;IACjCjB,OAAO,CAACgB,KAAK,CAAC,+CAA+C,CAAC;EAChE,CAAC,MAAM,IAAIA,KAAK,CAACE,OAAO,KAAK,eAAe,EAAE;IAC5ClB,OAAO,CAACgB,KAAK,CAAC,gDAAgD,CAAC;EACjE;EACA,OAAOG,OAAO,CAACC,MAAM,CAACJ,KAAK,CAAC;AAC9B,CACF,CAAC;AAED,eAAed,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}