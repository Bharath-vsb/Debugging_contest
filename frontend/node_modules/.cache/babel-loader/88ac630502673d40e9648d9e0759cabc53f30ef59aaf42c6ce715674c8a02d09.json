{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import api from'../utils/api';import'./AdminLogin.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AdminLogin(){const navigate=useNavigate();const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[showPassword,setShowPassword]=useState(false);const[error,setError]=useState('');const[loading,setLoading]=useState(false);const handleSubmit=async e=>{e.preventDefault();setError('');setLoading(true);console.log('[AdminLogin] Attempting login...');try{const{data}=await api.post('/admin/login',{username,password});console.log('[AdminLogin] Login response:',{success:data.success,hasToken:!!data.token});if(data.success&&data.token){console.log('[AdminLogin] Saving token to sessionStorage (clears on refresh)...');sessionStorage.setItem('adminToken',data.token);// Verify it was saved\nconst savedToken=sessionStorage.getItem('adminToken');console.log('[AdminLogin] Token saved successfully:',{tokenSaved:!!savedToken,tokenPreview:savedToken?\"\".concat(savedToken.substring(0,20),\"...\"):'null'});console.log('[AdminLogin] Navigating to /admin/dashboard');navigate('/admin/dashboard');}else{setError('Login failed - no token received');}}catch(err){var _err$response,_err$response$data;console.error('[AdminLogin] Login error:',err);setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Login failed');}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"admin-login\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"admin-login__card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"admin-login__icon\",children:\"\\u2B21\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Admin Panel\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Manage rounds, questions, and results\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"admin-login__error\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"admin-login__field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,onChange:e=>setUsername(e.target.value),className:\"input\",placeholder:\"admin\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-login__field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-login__password-wrapper\",children:[/*#__PURE__*/_jsx(\"input\",{type:showPassword?\"text\":\"password\",value:password,onChange:e=>setPassword(e.target.value),className:\"input\",placeholder:\"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"admin-login__toggle-password\",onClick:()=>setShowPassword(!showPassword),\"aria-label\":showPassword?\"Hide password\":\"Show password\",children:showPassword?'ğŸ‘ï¸':'ğŸ‘ï¸â€ğŸ—¨ï¸'})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn--primary btn--lg\",disabled:loading,style:{width:'100%'},children:loading?'Signing inâ€¦':'Sign In'})]})]})});}export default AdminLogin;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}