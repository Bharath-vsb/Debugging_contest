{"ast":null,"code":"import _objectSpread from\"C:/Users/CSE/Documents/contest-platform/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{useNavigate}from'react-router-dom';import api from'../utils/api';import'./RegistrationPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LANGUAGES=[{value:'C',label:'C',icon:'âŸ¨CâŸ©',color:'#5b9bd5',desc:'GCC Compiler'},{value:'Java',label:'Java',icon:'â˜•',color:'#f5a623',desc:'OpenJDK 17'},{value:'Python',label:'Python',icon:'ðŸ',color:'#00d4aa',desc:'Python 3.11'}];function RegistrationPage(){const navigate=useNavigate();const[form,setForm]=useState({fullName:'',rollNumber:'',collegeName:'',department:'',yearOfStudy:'',email:'',language:''});const[errors,setErrors]=useState({});const[loading,setLoading]=useState(false);const[submitted,setSubmitted]=useState(false);/* â”€â”€ Input change â”€â”€ */const handleChange=e=>{const{name,value}=e.target;setForm(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));if(errors[name])setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:undefined}));};/* â”€â”€ Language card click â”€â”€ */const selectLanguage=lang=>{setForm(prev=>_objectSpread(_objectSpread({},prev),{},{language:lang}));if(errors.language)setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{language:undefined}));};/* â”€â”€ Client-side validation â”€â”€ */const validate=()=>{const errs={};if(!form.fullName.trim())errs.fullName='Full name is required';if(!form.rollNumber.trim())errs.rollNumber='Roll number is required';if(!form.collegeName.trim())errs.collegeName='College name is required';if(!form.department.trim())errs.department='Department is required';if(!form.yearOfStudy)errs.yearOfStudy='Year of study is required';if(!form.email.trim())errs.email='Email is required';else if(!/\\S+@\\S+\\.\\S+/.test(form.email))errs.email='Invalid email';if(!form.language)errs.language='Please select a language';return errs;};/* â”€â”€ Submit â”€â”€ */const handleSubmit=async e=>{e.preventDefault();const errs=validate();if(Object.keys(errs).length>0){setErrors(errs);return;}setLoading(true);try{const{data}=await api.post('/student/register',form);if(data.success){// Store student roll in sessionStorage for later rounds\nsessionStorage.setItem('contestRollNumber',form.rollNumber.trim());setSubmitted(true);// Redirect after brief success animation\nsetTimeout(()=>navigate('/contest'),1400);}}catch(err){var _err$response,_err$response$data;setErrors({_global:((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Registration failed. Try again.'});}finally{setLoading(false);}};/* â”€â”€ Success screen â”€â”€ */if(submitted){return/*#__PURE__*/_jsxs(\"div\",{className:\"reg-success\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"reg-success__icon\",children:\"\\u2713\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Registered!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Redirecting to contest\\u2026\"})]});}return/*#__PURE__*/_jsx(\"div\",{className:\"reg-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"reg-page__card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"reg-page__header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"reg-page__logo\",onClick:()=>navigate('/'),style:{cursor:'pointer'},children:\"\\u2B21 Bug Hunters\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"reg-page__title\",children:\"Enter the Arena\"}),/*#__PURE__*/_jsx(\"p\",{className:\"reg-page__sub\",children:\"Fill in your details and pick your weapon.\"})]}),errors._global&&/*#__PURE__*/_jsx(\"div\",{className:\"reg-page__alert\",children:errors._global}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,noValidate:true,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"reg-page__grid\",children:[/*#__PURE__*/_jsx(Field,{label:\"Full Name\",name:\"fullName\",value:form.fullName,onChange:handleChange,error:errors.fullName,placeholder:\"Arjun Mehta\"}),/*#__PURE__*/_jsx(Field,{label:\"Roll Number\",name:\"rollNumber\",value:form.rollNumber,onChange:handleChange,error:errors.rollNumber,placeholder:\"2024CS0042\"}),/*#__PURE__*/_jsx(Field,{label:\"College Name\",name:\"collegeName\",value:form.collegeName,onChange:handleChange,error:errors.collegeName,placeholder:\"Indian Institute of Technology\"}),/*#__PURE__*/_jsx(Field,{label:\"Department\",name:\"department\",value:form.department,onChange:handleChange,error:errors.department,placeholder:\"Computer Science\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"reg-page__row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"reg-page__field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Year of Study\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"yearOfStudy\",value:form.yearOfStudy,onChange:handleChange,className:errors.yearOfStudy?'input input--error':'input',children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select year\"}),[1,2,3,4,5,6].map(y=>/*#__PURE__*/_jsxs(\"option\",{value:y,children:[y,y===1?'st':y===2?'nd':y===3?'rd':'th',\" Year\"]},y))]}),errors.yearOfStudy&&/*#__PURE__*/_jsx(\"span\",{className:\"reg-page__error\",children:errors.yearOfStudy})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"reg-page__field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:form.email,onChange:handleChange,className:errors.email?'input input--error':'input',placeholder:\"arjun@iit.edu\"}),errors.email&&/*#__PURE__*/_jsx(\"span\",{className:\"reg-page__error\",children:errors.email})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"reg-page__section\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"reg-page__section-label\",children:[\"Choose Your Language\",/*#__PURE__*/_jsx(\"span\",{className:\"reg-page__section-note\",children:\"\\u2014 locked after registration\"})]}),errors.language&&/*#__PURE__*/_jsx(\"span\",{className:\"reg-page__error\",style:{marginBottom:8},children:errors.language}),/*#__PURE__*/_jsx(\"div\",{className:\"lang-cards\",children:LANGUAGES.map(lang=>/*#__PURE__*/_jsxs(\"div\",{className:\"lang-card \".concat(form.language===lang.value?'lang-card--active':''),onClick:()=>selectLanguage(lang.value),style:{'--card-color':lang.color},children:[/*#__PURE__*/_jsx(\"span\",{className:\"lang-card__icon\",children:lang.icon}),/*#__PURE__*/_jsx(\"span\",{className:\"lang-card__label\",children:lang.label}),/*#__PURE__*/_jsx(\"span\",{className:\"lang-card__desc\",children:lang.desc}),form.language===lang.value&&/*#__PURE__*/_jsx(\"span\",{className:\"lang-card__check\",children:\"\\u2713\"})]},lang.value))})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn--primary btn--lg\",disabled:loading,style:{width:'100%'},children:loading?'Registeringâ€¦':'Register & Start Contest'})]})]})});}/* â”€â”€ Reusable text input â”€â”€ */function Field(_ref){let{label,name,value,onChange,error,placeholder}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"reg-page__field\",children:[/*#__PURE__*/_jsx(\"label\",{children:label}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:name,value:value,onChange:onChange,className:error?'input input--error':'input',placeholder:placeholder}),error&&/*#__PURE__*/_jsx(\"span\",{className:\"reg-page__error\",children:error})]});}export default RegistrationPage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}