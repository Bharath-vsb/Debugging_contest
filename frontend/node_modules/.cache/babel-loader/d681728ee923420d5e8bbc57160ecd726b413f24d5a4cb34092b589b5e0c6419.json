{"ast":null,"code":"import _objectSpread from\"C:/Users/CSE/Documents/contest-platform/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import api from'../utils/api';import'./AdminDashboard.css';/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n   ADMIN DASHBOARD\n   Tabs: Rounds | Questions | Scores\n   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AdminDashboard(){const navigate=useNavigate();const[tab,setTab]=useState('rounds');// rounds | questions | scores\nconst[timers,setTimers]=useState({1:30,2:30,3:30});const[questions,setQuestions]=useState([]);const[dashboard,setDashboard]=useState([]);const[qFilter,setQFilter]=useState({round:'',language:''});// Clear token on page refresh or close\nuseEffect(()=>{const handleBeforeUnload=()=>{sessionStorage.removeItem('adminToken');};window.addEventListener('beforeunload',handleBeforeUnload);return()=>{window.removeEventListener('beforeunload',handleBeforeUnload);};},[]);// Load data on mount\nuseEffect(()=>{fetchTimers();fetchQuestions();fetchDashboard();},[]);/* â”€â”€ API calls â”€â”€ */const fetchTimers=async()=>{try{const{data}=await api.get('/admin/rounds/config');if(data.success)setTimers(data.timers);}catch(_){}};const fetchQuestions=async()=>{try{const params={};if(qFilter.round)params.round=qFilter.round;if(qFilter.language)params.language=qFilter.language;const{data}=await api.get('/admin/questions',{params});if(data.success)setQuestions(data.questions);}catch(_){}};const fetchDashboard=async()=>{try{const{data}=await api.get('/admin/dashboard');if(data.success)setDashboard(data.dashboard);}catch(_){}};// Re-fetch questions when filter changes\nuseEffect(()=>{fetchQuestions();},[qFilter]);// Re-fetch data when tab changes\nuseEffect(()=>{if(tab==='questions'){fetchQuestions();}else if(tab==='scores'){fetchDashboard();}else if(tab==='rounds'){fetchTimers();}},[tab]);/* â”€â”€ Logout â”€â”€ */const handleLogout=()=>{sessionStorage.removeItem('adminToken');navigate('/admin');};return/*#__PURE__*/_jsxs(\"div\",{className:\"admin\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"admin__header\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"admin__logo\",children:[\"\\u2B21 Bug Hunters \",/*#__PURE__*/_jsx(\"span\",{className:\"admin__logo-role\",children:\"Admin\"})]}),/*#__PURE__*/_jsx(\"nav\",{className:\"admin__tabs\",children:[{key:'rounds',label:'âš™ Rounds'},{key:'questions',label:'ğŸ“ Questions'},{key:'scores',label:'ğŸ† Scores'}].map(t=>/*#__PURE__*/_jsx(\"button\",{className:\"admin__tab \".concat(tab===t.key?'admin__tab--active':''),onClick:()=>setTab(t.key),children:t.label},t.key))}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn--ghost btn--sm\",onClick:handleLogout,children:\"Logout\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin__content\",children:[tab==='rounds'&&/*#__PURE__*/_jsx(RoundsPanel,{timers:timers,setTimers:setTimers,onSave:fetchTimers}),tab==='questions'&&/*#__PURE__*/_jsx(QuestionsPanel,{questions:questions,qFilter:qFilter,setQFilter:setQFilter,onDelete:()=>fetchQuestions()}),tab==='scores'&&/*#__PURE__*/_jsx(ScoresPanel,{dashboard:dashboard,onRefresh:fetchDashboard})]})]});}/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n   ROUNDS PANEL\n   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */function RoundsPanel(_ref){let{timers,setTimers,onSave}=_ref;const[saving,setSaving]=useState({});const[saved,setSaved]=useState({});const handleSave=async round=>{setSaving(prev=>_objectSpread(_objectSpread({},prev),{},{[round]:true}));try{await api.post('/admin/rounds/config',{round,timerMinutes:timers[round]});setSaved(prev=>_objectSpread(_objectSpread({},prev),{},{[round]:true}));setTimeout(()=>setSaved(prev=>_objectSpread(_objectSpread({},prev),{},{[round]:false})),2000);onSave();}catch(err){alert('Failed to save timer');}finally{setSaving(prev=>_objectSpread(_objectSpread({},prev),{},{[round]:false}));}};return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"admin-panel__header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Round Timer Configuration\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Set the duration (in minutes) for each round. Students' countdown starts when they click \\\"Start Round\\\".\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"rounds-grid\",children:[1,2,3].map(round=>/*#__PURE__*/_jsxs(\"div\",{className:\"rounds-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rounds-card__num\",children:[\"Round \",round]}),/*#__PURE__*/_jsx(\"div\",{className:\"rounds-card__info\",children:/*#__PURE__*/_jsx(\"span\",{children:round===1?'4 Questions':round===2?'3 Questions':'2 Questions'})}),/*#__PURE__*/_jsxs(\"div\",{className:\"rounds-card__input-row\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:1,max:180,value:timers[round],onChange:e=>setTimers(prev=>_objectSpread(_objectSpread({},prev),{},{[round]:Number(e.target.value)})),className:\"input\"}),/*#__PURE__*/_jsx(\"span\",{className:\"rounds-card__unit\",children:\"min\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn--primary btn--sm\",onClick:()=>handleSave(round),disabled:saving[round],children:saved[round]?'âœ“ Saved':saving[round]?'â€¦':'Save'})]},round))}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-panel__header\",style:{marginTop:40},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Upload New Question\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Provide correct working code. The system will auto-generate a buggy version and test cases.\"})]}),/*#__PURE__*/_jsx(QuestionUploadForm,{})]});}/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n   QUESTION UPLOAD FORM\n   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */function QuestionUploadForm(){const[form,setForm]=useState({title:'',description:'',round:'1',language:'C',correctCode:''});const[loading,setLoading]=useState(false);const[result,setResult]=useState(null);// { success, message }\nconst handleChange=e=>{const{name,value}=e.target;setForm(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleSubmit=async e=>{e.preventDefault();if(!form.title){setResult({success:false,message:'Title is required'});return;}setLoading(true);setResult(null);try{const{data}=await api.post('/admin/questions',_objectSpread(_objectSpread({},form),{},{round:Number(form.round)}));setResult({success:true,message:data.message||'Question uploaded successfully'});setForm({title:'',description:'',round:form.round,language:form.language,correctCode:''});}catch(err){var _err$response,_err$response$data;setResult({success:false,message:((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Upload failed'});}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"upload-form\",children:[result&&/*#__PURE__*/_jsx(\"div\",{className:\"upload-form__alert \".concat(result.success?'upload-form__alert--success':'upload-form__alert--error'),children:result.message}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"upload-form__row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"upload-form__field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",value:form.title,onChange:handleChange,className:\"input\",placeholder:\"Reverse an Array\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"upload-form__field upload-form__field--sm\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Round\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"round\",value:form.round,onChange:handleChange,className:\"input\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"Round 1\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"Round 2\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"Round 3\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"upload-form__field upload-form__field--sm\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Language\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"language\",value:form.language,onChange:handleChange,className:\"input\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"C\",children:\"C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Java\",children:\"Java\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Python\",children:\"Python\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"upload-form__field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:form.description,onChange:handleChange,className:\"input\",rows:3,placeholder:\"Describe the problem the student must solve...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"upload-form__field\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Correct Working Code \",/*#__PURE__*/_jsx(\"span\",{style:{color:'var(--accent)',fontSize:'0.7rem'},children:\"(system will auto-generate buggy version + test cases)\"})]}),/*#__PURE__*/_jsx(\"textarea\",{name:\"correctCode\",value:form.correctCode,onChange:handleChange,className:\"input\",style:{fontFamily:'var(--font-mono)',fontSize:'0.8rem',minHeight:220},placeholder:\"// Paste your correct, working \".concat(form.language,\" code here\")})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn--primary\",disabled:loading,children:loading?'Uploading & Generatingâ€¦':'ğŸ“¤ Upload Question'})]})]});}/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n   QUESTIONS PANEL (list)\n   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */function QuestionsPanel(_ref2){let{questions,qFilter,setQFilter,onDelete}=_ref2;const[viewingQuestion,setViewingQuestion]=useState(null);const deleteQuestion=async id=>{if(!window.confirm('Delete this question?'))return;try{await api.delete(\"/admin/questions/\".concat(id));onDelete();}catch(_){alert('Delete failed');}};// Count per round+language\nconst counts={};questions.forEach(q=>{const key=\"\".concat(q.round,\"-\").concat(q.language);counts[key]=(counts[key]||0)+1;});return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"admin-panel__header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Questions Library\"}),/*#__PURE__*/_jsx(\"p\",{children:\"View and manage uploaded questions. Each round/language should have 15 questions.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"questions-filters\",children:[/*#__PURE__*/_jsxs(\"select\",{value:qFilter.round,onChange:e=>setQFilter(prev=>_objectSpread(_objectSpread({},prev),{},{round:e.target.value})),className:\"input\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Rounds\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"Round 1\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"Round 2\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"Round 3\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:qFilter.language,onChange:e=>setQFilter(prev=>_objectSpread(_objectSpread({},prev),{},{language:e.target.value})),className:\"input\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Languages\"}),/*#__PURE__*/_jsx(\"option\",{value:\"C\",children:\"C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Java\",children:\"Java\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Python\",children:\"Python\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"questions-progress\",children:[1,2,3].map(r=>['C','Java','Python'].map(l=>{const count=counts[\"\".concat(r,\"-\").concat(l)]||0;const pct=Math.min(100,count/15*100);return/*#__PURE__*/_jsxs(\"div\",{className:\"q-progress-item\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"q-progress-label\",children:[\"R\",r,\" \",l]}),/*#__PURE__*/_jsx(\"div\",{className:\"q-progress-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"q-progress-fill\",style:{width:\"\".concat(pct,\"%\")}})}),/*#__PURE__*/_jsxs(\"span\",{className:\"q-progress-count\",children:[count,\"/15\"]})]},\"\".concat(r,\"-\").concat(l));}))}),/*#__PURE__*/_jsxs(\"div\",{className:\"questions-list\",children:[questions.length===0&&/*#__PURE__*/_jsx(\"p\",{className:\"questions-empty\",children:\"No questions found.\"}),questions.map(q=>/*#__PURE__*/_jsxs(\"div\",{className:\"q-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"q-card__meta\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"q-card__badge q-card__badge--round\",children:[\"Round \",q.round]}),/*#__PURE__*/_jsx(\"span\",{className:\"q-card__badge q-card__badge--lang\",children:q.language}),/*#__PURE__*/_jsxs(\"span\",{className:\"q-card__tc\",children:[q.testCaseCount||0,\" test cases\"]})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"q-card__title\",children:q.title}),/*#__PURE__*/_jsx(\"p\",{className:\"q-card__desc\",children:q.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"q-card__actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn--secondary btn--sm\",onClick:()=>setViewingQuestion(q._id),children:\"View\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn--danger btn--sm\",onClick:()=>deleteQuestion(q._id),children:\"Delete\"})]})]},q._id))]}),viewingQuestion&&/*#__PURE__*/_jsx(QuestionDetailModal,{questionId:viewingQuestion,onClose:()=>setViewingQuestion(null)})]});}/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n   QUESTION DETAIL MODAL\n   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */function QuestionDetailModal(_ref3){let{questionId,onClose}=_ref3;const[data,setData]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{const fetchDetails=async()=>{try{const{data}=await api.get(\"/admin/questions/\".concat(questionId));if(data.success)setData(data.question);}catch(err){alert('Failed to load details');onClose();}finally{setLoading(false);}};fetchDetails();},[questionId,onClose]);if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:\"Loading...\"});if(!data)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:onClose,children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"h2\",{children:data.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-meta\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Round \",data.round]}),\" \\u2022 \",/*#__PURE__*/_jsx(\"span\",{children:data.language})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Correct Code\"}),/*#__PURE__*/_jsx(\"pre\",{className:\"code-block\",children:data.correctCode})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Generated Test Cases (\",data.testCases.length,\")\"]}),data.testCases.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No test cases generated.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"tc-table-wrap\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"tc-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Input\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Expected Output\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.testCases.map((tc,i)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"pre\",{children:tc.input})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"pre\",{children:tc.expectedOutput})})]},i))})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Generated Buggy Code (Preview)\"}),/*#__PURE__*/_jsx(\"pre\",{className:\"code-block\",children:data.buggyCode})]})]})});}/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n   SCORES PANEL\n   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */function ScoresPanel(_ref4){let{dashboard,onRefresh}=_ref4;const[deleting,setDeleting]=useState(null);// Track which student is being deleted\nconst handleExport=async()=>{try{const response=await api.get('/admin/export-excel',{responseType:'blob'});const url=URL.createObjectURL(response.data);const link=document.createElement('a');link.href=url;link.download='contest_results.xlsx';link.click();URL.revokeObjectURL(url);}catch(err){var _err$response2,_err$response2$data;alert('Export failed: '+(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||err.message));}};const deleteStudent=async(studentId,studentName)=>{if(!window.confirm(\"Are you sure you want to delete \".concat(studentName,\"? This will permanently remove all their data including scores and submissions.\"))){return;}setDeleting(studentId);try{const{data}=await api.delete(\"/admin/students/\".concat(studentId));if(data.success){alert(data.message||'Student deleted successfully');// Refresh the dashboard data without reloading page to prevent logout\nif(onRefresh)onRefresh();}}catch(err){var _err$response3,_err$response3$data;alert('Delete failed: '+(((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.message)||err.message));}finally{setDeleting(null);}};// Sort by finalAvgScore descending\nconst sorted=[...dashboard].sort((a,b)=>{var _b$finalAvgScore,_a$finalAvgScore;return((_b$finalAvgScore=b.finalAvgScore)!==null&&_b$finalAvgScore!==void 0?_b$finalAvgScore:-1)-((_a$finalAvgScore=a.finalAvgScore)!==null&&_a$finalAvgScore!==void 0?_a$finalAvgScore:-1);});return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"admin-panel__header\",style:{display:'flex',justifyContent:'space-between',alignItems:'flex-start'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Score Dashboard\"}),/*#__PURE__*/_jsxs(\"p\",{children:[dashboard.length,\" students registered\"]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn--primary btn--sm\",onClick:handleExport,children:\"\\uD83D\\uDCE5 Export Excel\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"scores-summary\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"scores-summary__card\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"scores-summary__num\",children:dashboard.length}),/*#__PURE__*/_jsx(\"span\",{className:\"scores-summary__label\",children:\"Total Students\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"scores-summary__card\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"scores-summary__num\",children:dashboard.filter(s=>s.round1Score!==null).length}),/*#__PURE__*/_jsx(\"span\",{className:\"scores-summary__label\",children:\"Completed R1\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"scores-summary__card\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"scores-summary__num\",children:dashboard.filter(s=>s.round2Score!==null).length}),/*#__PURE__*/_jsx(\"span\",{className:\"scores-summary__label\",children:\"Completed R2\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"scores-summary__card\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"scores-summary__num\",children:dashboard.filter(s=>s.finalAvgScore!==null).length}),/*#__PURE__*/_jsx(\"span\",{className:\"scores-summary__label\",children:\"Contest Done\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"scores-table-wrap\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"scores-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Roll No\"}),/*#__PURE__*/_jsx(\"th\",{children:\"College\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Dept\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Yr\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Lang\"}),/*#__PURE__*/_jsx(\"th\",{children:\"R1\"}),/*#__PURE__*/_jsx(\"th\",{children:\"R2\"}),/*#__PURE__*/_jsx(\"th\",{children:\"R3\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Avg\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Violations\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[sorted.map((s,i)=>{var _s$round1Score,_s$round2Score,_s$round3Score,_s$finalAvgScore;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"scores-table__rank\",children:i+1}),/*#__PURE__*/_jsx(\"td\",{className:\"scores-table__name\",children:s.name}),/*#__PURE__*/_jsx(\"td\",{children:s.rollNumber}),/*#__PURE__*/_jsx(\"td\",{children:s.college}),/*#__PURE__*/_jsx(\"td\",{children:s.department}),/*#__PURE__*/_jsx(\"td\",{children:s.year}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"scores-table__lang\",children:s.language})}),/*#__PURE__*/_jsx(\"td\",{className:\"scores-table__score\",children:(_s$round1Score=s.round1Score)!==null&&_s$round1Score!==void 0?_s$round1Score:'â€”'}),/*#__PURE__*/_jsx(\"td\",{className:\"scores-table__score\",children:(_s$round2Score=s.round2Score)!==null&&_s$round2Score!==void 0?_s$round2Score:'â€”'}),/*#__PURE__*/_jsx(\"td\",{className:\"scores-table__score\",children:(_s$round3Score=s.round3Score)!==null&&_s$round3Score!==void 0?_s$round3Score:'â€”'}),/*#__PURE__*/_jsx(\"td\",{className:\"scores-table__avg \".concat(s.finalAvgScore!==null?'scores-table__avg--set':''),children:(_s$finalAvgScore=s.finalAvgScore)!==null&&_s$finalAvgScore!==void 0?_s$finalAvgScore:'â€”'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"scores-table__violations \".concat(s.violationAttempts>=3?'scores-table__violations--high':s.violationAttempts>0?'scores-table__violations--medium':''),children:s.violationAttempts||0})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"scores-table__status \".concat(s.status==='Disqualified'?'scores-table__status--disqualified':'scores-table__status--active'),children:s.status||'Active'})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn--danger btn--sm\",onClick:()=>deleteStudent(s._id,s.name),disabled:deleting===s._id,children:deleting===s._id?'...':'ğŸ—‘ï¸'})})]},i);}),sorted.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:14,style:{textAlign:'center',color:'var(--text-muted)',padding:32},children:\"No students yet\"})})]})]})})]});}export default AdminDashboard;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}